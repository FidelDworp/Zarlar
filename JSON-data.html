<!DOCTYPE html>
<html>
<head>
    <title>Zarlardinge - Kamer Statussen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            background: url("BG.jpg") center/cover no-repeat;
            font-family: Arial, sans-serif;
            color: #333;
            margin: 20px;
        }
        .title {
            font-size: 28px;
            font-weight: bold;
            text-align: center;
            margin: 30px 0 20px;
            color: #333;
        }
        .subtitle {
            text-align: center;
            font-size: 18px;
            color: #555;
            margin-bottom: 30px;
        }
        .buttons {
            text-align: center;
            margin: 30px 0;
            flex-wrap: wrap;
            display: flex;
            justify-content: center;
            gap: 12px;
        }
        .btn {
            padding: 14px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            min-width: 130px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn:hover { background: #0056b3; transform: translateY(-2px); }
        .status-box {
            max-width: 600px;
            margin: 30px auto;
            padding: 25px;
            background: rgba(255, 255, 255, 0.94);
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .item {
            margin: 12px 0;
            font-size: 16px;
            padding: 6px 0;
            border-bottom: 1px solid #eee;
        }
        .label {
            font-weight: bold;
            display: inline-block;
            width: 220px;
            color: #1a5276;
        }
        .loading {
            text-align: center;
            font-size: 18px;
            color: #666;
            font-style: italic;
        }
        .home {
            display: block;
            width: 140px;
            margin: 40px auto;
            padding: 14px;
            background: #28a745;
            color: white;
            text-align: center;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .home:hover { background: #218838; }
    </style>
</head>
<body>

<div class="title">Zarlardinge - Live Kamerstatus</div>
<div class="subtitle">Kies een ruimte</div>

<div class="buttons">
    <button class="btn" onclick="loadStatus('30002c000547343233323032', 'BandB')">BandB</button>
    <button class="btn" onclick="loadStatus('5600420005504b464d323520', 'Badkamer')">Badkamer</button>
    <button class="btn" onclick="loadStatus('420035000e47343432313031', 'Inkom')">Inkom</button>
    <button class="btn" onclick="loadStatus('310017001647373335333438', 'Keuken')">Keuken</button>
    <button class="btn" onclick="loadStatus('33004f000e504b464d323520', 'Wasplaats')">Wasplaats</button>
    <button class="btn" onclick="loadStatus('210042000b47343432313031', 'Eetplaats')">Eetplaats</button>
    <button class="btn" onclick="loadStatus('410038000547353138383138', 'Zitplaats')">Zitplaats</button>
</div>

<div id="result" class="status-box">
    <p class="loading">Kies een kamer om de live status te zien...</p>
</div>

<a href="index.html" class="home">Terug naar Home</a>

<script>
const token = 'ba9d9e1ed9f70cc5db24de2db21764a3a3afe28b';

// Mooie namen (exact zoals in jouw Google Script)
const labels = {
    a: "BEAMlight",      b: "Dust",           c: "Dew",            d: "Humi",
    e: "DewAlert",       f: "SUNLight",       g: "Strength",      h: "Quality",
    i: "MOV1light",      j: "MOV2",           k: "TSTATon",        l: "Light",
    m: "MOV1",           n: "MOV2light",      o: "BEAMalert",      p: "Night",
    q: "Bed",            r: "R (Red)",        s: "G (Green)",      t: "B (Blue)",
    u: "CO2",            v: "FreeMem",        w: "Temp1",          x: "Temp2"
};

async function loadStatus(deviceId, locationName) {
    const resultDiv = document.getElementById('result');
    resultDiv.innerHTML = `<p class="loading">Laden status voor <strong>${locationName}</strong>...</p>`;

    try {
        const response = await fetch(`https://api.particle.io/v1/devices/${deviceId}/JSON_status?access_token=${token}`);
        const data = await response.json();

        if (!data.result) throw new Error("Geen data ontvangen");

        const jsonString = unescape(data.result);
        const status = JSON.parse(jsonString);

        let html = `<h2 style="text-align:center;color:#1a5276;margin-bottom:25px">${locationName} - Live Status</h2>`;

        // Sorteer op volgorde zoals in jouw Google Script: v,w,x,g,h,d,c,k,e,b,a,l,i,m,j,n,o,p,f,q,r,s,t,u
        const order = ['v','w','x','g','h','d','c','k','e','b','a','l','i','m','j','n','o','p','f','q','r','s','t','u'];
        order.forEach(key => {
            if (status.hasOwnProperty(key)) {
                const niceName = labels[key] || key.toUpperCase();
                html += `<div class="item"><span class="label">${niceName}:</span> ${status[key]}</div>`;
            }
        });

        resultDiv.innerHTML = html;

    } catch (err) {
        resultDiv.innerHTML = `<p style="color:red;text-align:center">Fout bij ophalen ${locationName}<br><small>${err.message}</small></p>`;
        console.error(err);
    }
}
</script>

</body>
</html>
